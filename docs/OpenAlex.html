<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Using OpenAlex to get publication metadata</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9e4fcba45380839d921a2407e9779fb2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="site_libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet">

<script src="site_libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>

<script src="site_libs/wordcloud2-0.0.1/hover.js"></script>

<script src="site_libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>



<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./making_missing_data_work.html">Posts</a></li><li class="breadcrumb-item"><a href="./OpenAlex.html">Using OpenAlex to get publication metadata</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">About me</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Index of posts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Publications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publications</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Posts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./making_missing_data_work.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Ecology_SR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rapid review short-cuts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ESHackathon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is the ESHackathon?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./What_makes_a_good_systematic_review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What makes a good evidence synthesis?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./OpenAlex.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Using OpenAlex to get publication metadata</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Dynamic_Meta_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamic Meta-analysis - When Transparency Meets Multiplicity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Ecology_is_not_medicine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ecology is not medicine</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Presentations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./presentations/page-reveal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Leveraging open tools for evidence synthesis</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#extract-the-topics" id="toc-extract-the-topics" class="nav-link active" data-scroll-target="#extract-the-topics"><span class="header-section-number">1</span> Extract the topics</a>
  <ul>
  <li><a href="#all-topics" id="toc-all-topics" class="nav-link" data-scroll-target="#all-topics"><span class="header-section-number">1.1</span> All topics</a></li>
  <li><a href="#primary-topics" id="toc-primary-topics" class="nav-link" data-scroll-target="#primary-topics"><span class="header-section-number">1.2</span> Primary topics</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./making_missing_data_work.html">Posts</a></li><li class="breadcrumb-item"><a href="./OpenAlex.html">Using OpenAlex to get publication metadata</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Using OpenAlex to get publication metadata</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>I have been playing around with the <a href="https://docs.ropensci.org/openalexR/index.html">OpenAlexR</a> package which interfaces with the <a href="https://openalex.org/">OpenAlex API</a>. This allows you to get bibliographic information about publications, authors, institutions, sources, funders, publishers, topics and concepts.</p>
<p>Here I first look at the proportion of open publications published by <a href="www.nina.no">NINA</a> over time.</p>
<p>First we need to look for the Institution ID.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openalexR, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oa_fetch</span>( <span class="at">entity =</span> <span class="st">"inst"</span>, <span class="co"># same as "institutions" </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">display_name.search =</span> <span class="st">"</span><span class="sc">\"</span><span class="st">Norwegian Institute for Nature</span><span class="sc">\"</span><span class="st">"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(display_name, ror) <span class="sc">|&gt;</span>  </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">display_name</th>
<th style="text-align: left;">ror</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Norwegian Institute for Nature Research</td>
<td style="text-align: left;">https://ror.org/04aha0598</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Then we can get a dataframe of the publications.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>All_NINA<span class="ot">&lt;-</span> <span class="fu">oa_fetch</span>( <span class="at">entity =</span> <span class="st">"works"</span>, <span class="at">institutions.ror =</span> <span class="st">"04aha0598"</span>, <span class="at">type =</span> <span class="st">"article"</span>, <span class="at">from_publication_date =</span> <span class="st">"2000-01-01"</span>, <span class="at">is_paratext =</span> <span class="st">"false"</span> )</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the open records</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>open_access <span class="ot">&lt;-</span> <span class="fu">oa_fetch</span>( <span class="at">entity =</span> <span class="st">"works"</span>, <span class="at">institutions.ror =</span> <span class="st">"04aha0598"</span>, <span class="at">type =</span> <span class="st">"article"</span>, <span class="at">from_publication_date =</span> <span class="st">"2000-01-01"</span>, <span class="at">is_paratext =</span> <span class="st">"false"</span>, <span class="at">is_oa =</span> <span class="st">"true"</span>, <span class="at">group_by =</span> <span class="st">"publication_year"</span> )</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the closed records</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>closed_access <span class="ot">&lt;-</span> <span class="fu">oa_fetch</span>( <span class="at">entity =</span> <span class="st">"works"</span>, <span class="at">institutions.ror =</span> <span class="st">"04aha0598"</span>, <span class="at">type =</span> <span class="st">"article"</span>, <span class="at">from_publication_date =</span> <span class="st">"2000-01-01"</span>, <span class="at">is_paratext =</span> <span class="st">"false"</span>, <span class="at">is_oa =</span> <span class="st">"false"</span>, <span class="at">group_by =</span> <span class="st">"publication_year"</span> )</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Join the dataframes together</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>uf_df <span class="ot">&lt;-</span> closed_access <span class="sc">|&gt;</span>  </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span> key_display_name) <span class="sc">|&gt;</span>  </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(open_access, <span class="at">by =</span> <span class="st">"key"</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_ca"</span>, <span class="st">"_oa"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can plot the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>uf_df  <span class="sc">|&gt;</span>  <span class="fu">filter</span>(key <span class="sc">&lt;=</span> <span class="dv">2024</span>) <span class="sc">|&gt;</span> <span class="co"># we do not yet have complete data for 2024</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"count"</span>))  <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">year =</span> <span class="fu">as.integer</span>(key), <span class="at">is_oa =</span> <span class="fu">recode</span>( name, <span class="st">"count_ca"</span> <span class="ot">=</span> <span class="st">"Closed Access"</span>, <span class="st">"count_oa"</span> <span class="ot">=</span> <span class="st">"Open Access"</span> ), <span class="at">label =</span> <span class="fu">if_else</span>(key <span class="sc">&lt;</span> <span class="dv">2024</span>, <span class="cn">NA_character_</span>, is_oa) )  <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, value, is_oa, label)  <span class="sc">|&gt;</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> value, <span class="at">group =</span> is_oa, <span class="at">color =</span> is_oa)) <span class="sc">+</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>( <span class="at">title =</span> <span class="st">"NINA's progress towards Open Access"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Number of journal articles"</span>) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2000</span>, <span class="dv">2024</span>, <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label), <span class="at">nudge_x =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">2024.5</span>)) <span class="sc">+</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">"none"</span>)<span class="sc">+</span> </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_solarized</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="OpenAlex_files/figure-html/plot the data-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="extract-the-topics" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="extract-the-topics"><span class="header-section-number">1</span> Extract the topics</h2>
<p>The “topic” for each record is a description of the subject matter of the publication determined by using a large language model. The example from the <a href="https://help.openalex.org/how-it-works/topics">OpenAlex topics page</a> is:</p>
<p><strong>Example Topic</strong>: “Artificial Intelligence in Medicine” <strong>Domain</strong>: “Health Sciences” <strong>Field</strong>: “Medicine” <strong>Subfield</strong>: “Health Informatics”</p>
<p>Each topic is made up of a subfield, a field and a domain. The model scores each documents topics, with the highest topic score being considered the “primary” topic.</p>
<section id="all-topics" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="all-topics"><span class="header-section-number">1.1</span> All topics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>expanded_tibble <span class="ot">&lt;-</span> All_NINA <span class="sc">|&gt;</span>  <span class="co"># Unnest the 'topics' to duplicate each row for each topic </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(topics, <span class="at">names_sep =</span> <span class="st">"_"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(display_name, <span class="fu">everything</span>())</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>word_df<span class="ot">&lt;-</span>expanded_tibble <span class="sc">|&gt;</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topics_display_name) <span class="sc">|&gt;</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>()</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>wordcloud2<span class="sc">::</span><span class="fu">wordcloud2</span>(word_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-3623c5bd65b8fed5d094" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3623c5bd65b8fed5d094">{"x":{"word":["3D Surveying and Cultural Heritage","AI in cancer detection","Academic Publishing and Open Access","Academic Writing and Publishing","Adipokines, Inflammation, and Metabolic Diseases","Adipose Tissue and Metabolism","Advanced Cellulose Research Studies","Advanced Chemical Sensor Technologies","Advanced Image and Video Retrieval Techniques","Advanced Neural Network Applications","Advanced Proteomics Techniques and Applications","Adventure Sports and Sensation Seeking","Aeolian processes and effects","Aerospace Engineering","Aerospace Engineering and Energy Systems","African Botany and Ecology Studies","African studies and sociopolitical issues","Aging, Elder Care, and Social Issues","Agricultural Economics and Policy","Agricultural Innovations and Practices","Agricultural and Biological Sciences","Agricultural and Environmental Management","Agricultural and Food Production Studies","Agricultural pest management studies","Agriculture Sustainability and Environmental Impact","Agriculture and Rural Development Research","Agriculture, Land Use, Rural Development","Agroforestry and silvopastoral systems","Agronomy and Crop Science","Air Quality and Health Impacts","Alcoholism and Thiamine Deficiency","Alzheimer's disease research and treatments","Amazonian Archaeology and Ethnohistory","Amoebic Infections and Treatments","Amphibian and Reptile Biology","Analytical Chemistry","Analytical Chemistry and Sensors","Analytical chemistry methods development","Anesthesia and Sedative Agents","Anesthesiology and Pain Medicine","Animal Behavior and Reproduction","Animal Behavior and Welfare Studies","Animal Disease Management and Epidemiology","Animal Diversity and Health Studies","Animal Ecology and Behavior Studies","Animal Genetics and Reproduction","Animal Nutrition and Physiology","Animal Science and Zoology","Animal Virus Infections Studies","Animal Vocal Communication and Behavior","Animal and Plant Science Education","Anomaly Detection Techniques and Applications","Anthropological Studies and Insights","Anthropology","Antibiotics Pharmacokinetics and Efficacy","Antioxidant Activity and Oxidative Stress","Applied Mathematics","Applied Psychology","Aquaculture Nutrition and Growth","Aquaculture disease management and microbiota","Aquatic Ecosystems and Biodiversity","Aquatic Ecosystems and Phytoplankton Dynamics","Aquatic Invertebrate Ecology and Behavior","Aquatic Science","Aquatic and Environmental Studies","Aquatic life and conservation","Archaeological Research and Protection","Archaeology and Natural History","Archaeology and ancient environmental studies","Archeology","Arctic and Antarctic ice dynamics","Arctic and Russian Policy Studies","Arsenic contamination and mitigation","Art, Technology, and Culture","Artificial Intelligence","Arts and Humanities","Assisted Reproductive Technology and Twin Pregnancy","Atherosclerosis and Cardiovascular Diseases","Atmospheric Ozone and Climate","Atmospheric Science","Atmospheric aerosols and clouds","Atmospheric and Environmental Gas Dynamics","Atmospheric chemistry and aerosols","Attachment and Relationship Dynamics","Automated Road and Building Extraction","Avian ecology and behavior","Bacterial Genetics and Biotechnology","Bacteriophages and microbial interactions","Bartonella species infections research","Bat Biology and Ecology Studies","Bayesian Methods and Mixture Models","Bayesian Modeling and Causal Inference","Bee Products Chemical Analysis","Behavioral Health and Interventions","Behavioral Neuroscience","Biochemistry","Biochemistry, Genetics and Molecular Biology","Biocrusts and Microbial Ecology","Bioeconomy and Sustainability Development","Bioenergy crop production and management","Bioengineering","Biological Control of Invasive Species","Biomaterials","Biomedical Engineering","Biomedical Ethics and Regulation","Biomedical Text Mining and Ontologies","Biomimetic flight and propulsion mechanisms","Biophysics","Biotechnology","Bird parasitology and diseases","Birth, Development, and Health","Body Composition Measurement Techniques","Botanical Studies and Applications","Botany and Plant Ecology Studies","Botany, Ecology, and Taxonomy Studies","Brucella: diagnosis, epidemiology, treatment","Bryophyte Studies and Records","Building Energy and Comfort Optimization","Building and Construction","Business, Management and Accounting","COVID-19 epidemiological studies","COVID-19 impact on air quality","CRISPR and Genetic Engineering","Cancer Research","Carcinogens and Genotoxicity Assessment","Cardiology and Cardiovascular Medicine","Cardiomyopathy and Myosin Studies","Cardiovascular Disease and Adiposity","Cardiovascular Effects of Exercise","Cardiovascular Function and Risk Factors","Career Development and Diversity","Catalytic Processes in Materials Science","Cavitation Phenomena in Pumps","Celiac Disease Research and Management","Cell Adhesion Molecules Research","Cell Biology","Cell Image Analysis Techniques","Cellular and Molecular Neuroscience","Census and Population Estimation","Cephalopods and Marine Biology","Chemical Engineering","Chemistry","Chemokine receptors and signaling","Child Nutrition and Water Access","Children's Rights and Participation","Chromosomal and Genetic Variations","Civil and Structural Engineering","Climate Change Communication and Perception","Climate Change Policy and Economics","Climate Change and Environmental Impact","Climate Change and Geoengineering","Climate Change and Health Impacts","Climate Change, Adaptation, Migration","Climate change and permafrost","Climate change impacts on agriculture","Climate variability and models","Clinical Psychology","Clostridium difficile and Clostridium perfringens research","Coastal and Marine Management","Coastal wetland ecosystem dynamics","Coccidia and coccidiosis research","Cognitive Neuroscience","Coleoptera Taxonomy and Distribution","Coleoptera: Cerambycidae studies","Collembola Taxonomy and Ecology Studies","Community Health and Development","Community and Sustainable Development","Comparative and International Law Studies","Complementary and Manual Therapy","Complex Network Analysis Techniques","Computational Mechanics","Computer Networks and Communications","Computer Science","Computer Science Applications","Computer Vision and Pattern Recognition","Conferences and Exhibitions Management","Congenital Anomalies and Fetal Surgery","Conservation","Conservation Techniques and Studies","Conservation, Biodiversity, and Resource Management","Conservation, Ecology, Wildlife Education","Constructed Wetlands for Wastewater Treatment","Consumer Behavior in Brand Consumption and Identification","Consumer Retail Behavior Studies","Coral and Marine Ecosystems Studies","Corporate Social Responsibility Reporting","Crafts, Textile, and Design","Critical Care and Intensive Care Medicine","Cross-Border Cooperation and Integration","Cruise Tourism Development and Management","Crustacean biology and ecology","Cryospheric studies and observations","Culinary Culture and Tourism","Cultural Heritage Management and Preservation","Cultural Studies","Data Analysis with R","Data Management and Algorithms","Data-Driven Disease Surveillance","Decision Sciences","Decision-Making and Behavioral Economics","Delphi Technique in Research","Demographic Trends and Gender Preferences","Demography","Dermatological diseases and infestations","Developmental Biology","Diatoms and Algae Research","Dietary Effects on Health","Diffusion and Search Dynamics","Digital Economy and Work Transformation","Digital Marketing and Social Media","Diptera species taxonomy and behavior","Disaster Management and Resilience","Distributed Sensor Networks and Detection Algorithms","Diverse Academic Research Areas","Diverse Aspects of Tourism Research","Diverse Cultural and Historical Studies","Diverse Musicological Studies","Diversity and Career in Medicine","Doping in Sports","Earth and Planetary Sciences","Earth-Surface Processes","Ecological Modeling","Ecology","Ecology and Conservation Studies","Ecology and Vegetation Dynamics Studies","Ecology and biodiversity studies","Ecology, Conservation, and Geographical Studies","Ecology, Evolution, Behavior and Systematics","Economic and Environmental Valuation","Economics and Econometrics","Economics, Econometrics and Finance","Ecosystem dynamics and resilience","Education","Education, Healthcare and Sociology Research","Effects and risks of endocrine disrupting chemicals","Effects of Environmental Stressors on Livestock","Efficiency Analysis Using DEA","Electrical and Electronic Engineering","Electrochemical Analysis and Applications","Electrochemistry","Electron and X-Ray Spectroscopy Techniques","Emergency Medical Services","Endocrinology","Endocrinology, Diabetes and Metabolism","Energy","Energy Efficiency and Management","Energy and Environment Impacts","Energy, Environment, Economic Growth","Engineering","Entomopathogenic Microorganisms in Pest Control","Environmental Chemistry","Environmental Conservation and Management","Environmental DNA in Biodiversity Studies","Environmental Education and Sustainability","Environmental Engineering","Environmental Impact and Sustainability","Environmental Justice and Health Disparities","Environmental Philosophy and Ethics","Environmental Policies and Emissions","Environmental Science","Environmental Science and Water Management","Environmental Sustainability in Business","Environmental Toxicology and Ecotoxicology","Environmental and Biological Research in Conflict Zones","Environmental and Cultural Studies in Latin America and Beyond","Environmental and Social Impact Assessments","Environmental and biological studies","Environmental law and policy","Environmental, Ecological, and Cultural Studies","Epidemiology","Epigenetics and DNA Methylation","Equine","Escherichia coli research studies","Essential Oils and Antimicrobial Activity","European and International Law Studies","Evaluation and Performance Assessment","Evolution and Genetic Dynamics","Evolution and Paleontology Studies","Evolutionary Game Theory and Cooperation","Evolutionary Psychology and Human Behavior","Exercise and Physiological Responses","Experimental Behavioral Economics Studies","Experimental and Cognitive Psychology","Family Dynamics and Relationships","Fern and Epiphyte Biology","Fire effects on ecosystems","Fish Biology and Ecology Studies","Fish Ecology and Management Studies","Fish biology, ecology, and behavior","Flood Risk Assessment and Management","Flow Measurement and Analysis","Fluid Dynamics Simulations and Interactions","Fluid Dynamics and Heat Transfer","Fluid Dynamics and Mixing","Fluoride Effects and Removal","Focus Groups and Qualitative Methods","Folklore, Mythology, and Literature Studies","Food Industry and Aquatic Biology","Food Science","Food Waste Reduction and Sustainability","Forensic Anthropology and Bioarchaeology Studies","Forensic Entomology and Diptera Studies","Forensic and Genetic Research","Forest Biomass Utilization and Management","Forest Ecology and Biodiversity Studies","Forest Insect Ecology and Management","Forest Management and Policy","Forest ecology and management","Forestry","Fossil Insects in Amber","French Urban and Social Studies","Freshwater macroinvertebrate diversity and ecology","Fungal Biology and Applications","Gastroenterology","Gaussian Processes and Bayesian Inference","Gender Diversity and Inequality","Gender Roles and Identity Studies","Gender Studies","General Agricultural and Biological Sciences","General Decision Sciences","General Economics, Econometrics and Finance","General Health Professions","General Social Sciences","Genetic Mapping and Diversity in Plants and Animals","Genetic Syndromes and Imprinting","Genetic and Clinical Aspects of Sex Determination and Chromosomal Abnormalities","Genetic and Environmental Crop Studies","Genetic and phenotypic traits in livestock","Genetic diversity and population structure","Genetically Modified Organisms Research","Genetics","Genetics and Physical Performance","Genomics and Phylogenetic Studies","Geochemistry and Elemental Analysis","Geochemistry and Geologic Mapping","Geochemistry and Petrology","Geographic Information Systems Studies","Geographies of human-animal interactions","Geography Education and Pedagogy","Geography, Planning and Development","Geological Formations and Processes Exploration","Geological Modeling and Analysis","Geological Studies and Exploration","Geological and Geophysical Studies Worldwide","Geological formations and processes","Geology","Geology and Paleoclimatology Research","Geometry and Topology","Geophysical Methods and Applications","Geophysics","Geotourism and Geoheritage Conservation","Global Cancer Incidence and Screening","Global Energy and Sustainability Research","Global Maritime and Colonial Histories","Global Public Health Policies and Epidemiology","Global and Planetary Change","Global trade and economics","Global trade, sustainability, and social impact","Glutathione Transferases and Polymorphisms","Grief, Bereavement, and Mental Health","Groundwater and Isotope Geochemistry","Growth Hormone and Insulin-like Growth Factors","Gut microbiota and health","Health","Health Policy Implementation Science","Health Professions","Health Sciences","Health Sciences Research and Education","Health, Environment, Cognitive Aging","Health, Medicine and Society","Health, Toxicology and Mutagenesis","Hearing Loss and Rehabilitation","Heavy Metal Exposure and Toxicity","Heavy metals in environment","Helminth infection and control","Heme Oxygenase-1 and Carbon Monoxide","Hemiptera Insect Studies","Hermeneutics and Narrative Identity","Herpesvirus Infections and Treatments","High Altitude and Hypoxia","Hip disorders and treatments","Historical Economic and Social Studies","Historical and Archaeological Studies","History","History and Philosophy of Science","Horticultural and Viticultural Research","Housing Market and Economics","Human Mobility and Location-Based Analysis","Human-Animal Interaction Studies","Human-Computer Interaction","Hungarian Social, Economic and Educational Studies","Hydraulic and Pneumatic Systems","Hydraulic flow and structures","Hydrological Forecasting Using AI","Hydrology and Sediment Transport Processes","Hydrology and Watershed Management Studies","Hydropower, Displacement, Environmental Impact","Hymenoptera taxonomy and phylogeny","Hypothalamic control of reproductive hormones","Ichthyology and Marine Biology","Identification and Quantification in Food","Image Enhancement Techniques","Image Processing and 3D Reconstruction","Immune Response and Inflammation","Immune cells in cancer","Immunology","Immunology and Allergy","Immunology and Microbiology","Impact of Light on Environment and Health","Indigenous Knowledge Systems and Agriculture","Indigenous Studies and Ecology","Indoor Air Quality and Microbial Exposure","Indoor and Outdoor Localization Technologies","Industrial and Manufacturing Engineering","Infectious Diseases","Influenza Virus Research Studies","Information Systems","Information Systems and Management","Infrastructure Resilience and Vulnerability Analysis","Injury Epidemiology and Prevention","Innovation, Sustainability, Human-Machine Systems","Innovative Human-Technology Interaction","Innovative Microfluidic and Catalytic Techniques Innovation","Inorganic Chemistry","Insect Pest Control Strategies","Insect Science","Insect Utilization and Effects","Insect and Arachnid Ecology and Behavior","Insect and Pesticide Research","Insect behavior and control techniques","Insect-Plant Interactions and Control","Integrated Water Resources Management","Interdisciplinary Research and Collaboration","International Maritime Law Issues","Invertebrate Immune Response Mechanisms","Invertebrate Taxonomy and Ecology","Isotope Analysis in Ecology","Korean Peninsula Historical and Political Studies","Land Rights and Reforms","Land Use and Ecosystem Services","Landscape and Cultural Studies","Landslides and related hazards","Law","Leaf Properties and Growth Measurement","Leech Biology and Applications","Lepidoptera: Biology and Taxonomy","Leptospirosis research and findings","Library Science and Information","Lichen and fungal ecology","Life Sciences","Lignin and Wood Chemistry","Literature and Literary Theory","Livestock Management and Performance Improvement","Livestock and Poultry Management","Lower Extremity Biomechanics and Pathologies","Management Science and Operations Research","Management, Monitoring, Policy and Law","Marine Biology and Ecology Research","Marine Biology and Environmental Chemistry","Marine Bivalve and Aquaculture Studies","Marine Ecology and Invasive Species","Marine Invertebrate Physiology and Ecology","Marine Sponges and Natural Products","Marine and Offshore Engineering Studies","Marine and coastal ecosystems","Marine and coastal plant biology","Marine and environmental studies","Marine and fisheries research","Marine animal studies overview","Maritime Transport Emissions and Efficiency","Maritime and Coastal Archaeology","Marketing","Material Properties and Processing","Materials Chemistry","Materials Science","Mathematical and Theoretical Epidemiology and Ecology Models","Mathematics","Meat and Animal Product Quality","Mechanical Engineering","Mechanics of Materials","Media Influence and Health","Media Technology","Media, Gender, and Advertising","Media, Religion, Digital Communication","Medicine","Medieval Architecture and Archaeology","Mediterranean and Iberian flora and fauna","Mercury impact and mitigation studies","Mesenchymal stem cell research","Meta-analysis and systematic reviews","Metabolomics and Mass Spectrometry Studies","Metal and Thin Film Mechanics","Metallurgy and Material Science","Meteorological Phenomena and Simulations","Methane Hydrates and Related Phenomena","MicroRNA in disease regulation","Microbial Community Ecology and Physiology","Microbial infections and disease research","Microbiology","Microplastics and Plastic Pollution","Migration and Labor Dynamics","Migration, Aging, and Tourism Studies","Migration, Ethnicity, and Economy","Mine drainage and remediation techniques","Mining and Resource Management","Mitochondrial Function and Pathology","Mobile Crowdsensing and Crowdsourcing","Modeling and Simulation","Modular Robots and Swarm Intelligence","Molecular Biology","Molecular Biology Techniques and Applications","Mollusks and Parasites Studies","Morphological variations and asymmetry","Mosquito-borne diseases and control","Municipal Solid Waste Management","Muscle Physiology and Disorders","Museology","Music","Music Technology and Sound Studies","Music and Audio Processing","Mycobacterium research and diagnosis","Mycorrhizal Fungi and Plant Interactions","Myxozoan Parasites in Aquatic Species","Natural Resources and Economic Development","Nature and Landscape Conservation","Nematode management and characterization studies","Neural dynamics and brain function","Neurobiology and Insect Physiology Research","Neuroendocrine regulation and behavior","Neurological diseases and metabolism","Neurology","Neuroscience","Noise Effects and Management","Non-Invasive Vital Sign Monitoring","Nuclear Issues and Defense","Nuclear and radioactivity studies","Nursing","Nutrition and Dietetics","Nutrition, Genetics, and Disease","Nutritional Studies and Diet","Obstetrics and Gynecology","Ocean Acidification Effects and Responses","Ocean Engineering","Oceanographic and Atmospheric Processes","Oceanography","Oil Palm Production and Sustainability","Oil and Gas Production Techniques","Olfactory and Sensory Function Studies","Oncology","Organ Donation and Transplantation","Organizational Behavior and Human Resource Management","Organizational Learning and Leadership","Orthopedics and Sports Medicine","Osteoarthritis Treatment and Mechanisms","Outdoor and Experiential Education","Pacific and Southeast Asian Studies","Paleontology","Paleontology and Evolutionary Biology","Paleontology and Stratigraphy of Fossils","Parasite Biology and Host Interactions","Parasites and Host Interactions","Parasitic Infections and Diagnostics","Parasitic infections in humans and animals","Parasitology","Parkinson's Disease Mechanisms and Treatments","Pasture and Agricultural Systems","Pathology and Forensic Medicine","Peatlands and Wetlands Ecology","Pediatric health and respiratory diseases","Pediatrics, Perinatology and Child Health","Per- and polyfluoroalkyl substances research","Peroxisome Proliferator-Activated Receptors","Pesticide Exposure and Toxicity","Pesticide Residue Analysis and Safety","Pesticide and Herbicide Environmental Studies","Pharmaceutical and Antibiotic Environmental Impacts","Pharmacological Effects and Assays","Pharmacological Effects and Toxicity Studies","Pharmacology","Pharmacology, Toxicology and Pharmaceutics","Philosophical and Theoretical Analysis","Philosophy","Photoacoustic and Ultrasonic Imaging","Photosynthetic Processes and Mechanisms","Physical Sciences","Physics and Astronomy","Physiological and biochemical adaptations","Physiology","Phytochemistry and Bioactivity Studies","Phytochemistry and Biological Activities","Phytoplasmas and Hemiptera pathogens","Place Attachment and Urban Studies","Plant Diversity and Evolution","Plant Ecology and Soil Science","Plant Parasitism and Resistance","Plant Pathogens and Fungal Diseases","Plant Pathogens and Resistance","Plant Reproductive Biology","Plant Science","Plant Stress Responses and Tolerance","Plant Taxonomy and Phylogenetics","Plant Virus Research Studies","Plant Water Relations and Carbon Dynamics","Plant and Biological Electrophysiology Studies","Plant and Fungal Species Descriptions","Plant and animal studies","Plant and soil sciences","Plant biochemistry and biosynthesis","Plant responses to elevated CO2","Plant responses to water stress","Plant tissue culture and regeneration","Plasma Applications and Diagnostics","Plasma Diagnostics and Applications","Pleistocene-Era Hominins and Archaeology","Point processes and geometric inequalities","Polar Research and Ecology","Political Science and International Relations","Pollution","Polyomavirus and related diseases","Precipitation Measurement and Analysis","Pregnancy and preeclampsia studies","Primate Behavior and Ecology","Prion Diseases and Protein Misfolding","Protist diversity and phylogeny","Psychological Well-being and Life Satisfaction","Psychology","Psychology of Moral and Emotional Judgment","Psychology of Social Influence","Public Health, Environmental and Occupational Health","Public Spaces through Art","Pulmonary and Respiratory Medicine","Q Methodology Applications","RNA regulation and disease","Rabbits: Nutrition, Reproduction, Health","Rabies epidemiology and control","Radiation Dose and Imaging","Radioactive contamination and transfer","Radioactive element chemistry and processing","Radioactivity and Radon Measurements","Radiological and Ultrasound Technology","Radiology, Nuclear Medicine and Imaging","Rangeland Management and Livestock Ecology","Rangeland and Wildlife Management","Recreation, Leisure, Wilderness Management","Recycling and Waste Management Techniques","Regional resilience and development","Rehabilitation","Religion, Ecology, and Ethics","Religion, Spirituality, and Psychology","Religious Tourism and Spaces","Remote Sensing and Land Use","Remote Sensing and LiDAR Applications","Remote Sensing in Agriculture","Remote-Sensing Image Classification","Renewable Energy and Sustainability","Renewable Energy, Sustainability and the Environment","Reproductive Medicine","Reproductive Physiology in Livestock","Reproductive biology and impacts on aquatic species","Reproductive tract infections research","Research Data Management Practices","Research in Social Sciences","Research on scale insects","Respiratory viral infections research","Rheumatology","Risk Perception and Management","Ruminant Nutrition and Digestive Physiology","Rural Development and Agriculture","Rural development and sustainability","SARS-CoV-2 and COVID-19 Research","Safety Research","Safety, Risk, Reliability and Quality","Salmonella and Campylobacter epidemiology","Scarabaeidae Beetle Taxonomy and Biogeography","Science and Climate Studies","Scientific Computing and Data Management","Seed Germination and Physiology","Seedling growth and survival studies","Selenium in Biological Systems","Semantic Web and Ontologies","Sensory Systems","Sharing Economy and Platforms","Shoulder Injury and Treatment","Signal Processing","Silicon Effects in Agriculture","Small Animals","Smart Agriculture and AI","Smart Materials for Construction","Social Acceptance of Renewable Energy","Social Psychology","Social Representations and Identity","Social Science and Policy Research","Social Sciences","Social Sciences and Governance","Social and Intergroup Psychology","Socioeconomics of Resources and Conservation","Sociology and Political Science","Software Engineering Research","Soil Carbon and Nitrogen Dynamics","Soil Geostatistics and Mapping","Soil Science","Soil and Environmental Studies","Soil and Land Suitability Analysis","Soil and Water Nutrient Dynamics","Soil erosion and sediment transport","Space and Planetary Science","Spaceflight effects on biology","Spatial and Panel Data Analysis","Species Distribution and Climate Change","Spectroscopy","Spectroscopy and Chemometric Analyses","Speech and Audio Processing","Speech and Hearing","Sperm and Testicular Function","Sport and Mega-Event Impacts","Sports, Gender, and Society","Statistical Methods and Bayesian Inference","Statistical Methods and Inference","Statistical and Nonlinear Physics","Statistics and Probability","Statistics, Probability and Uncertainty","Strategy and Management","Stress Responses and Cortisol","Study of Mite Species","Subterranean biodiversity and taxonomy","Surfaces, Coatings and Films","Surgery","Survey Methodology and Nonresponse","Survey Sampling and Estimation Techniques","Sustainability and Climate Change Governance","Sustainability and Ecological Systems Analysis","Sustainability in Higher Education","Sustainable Agricultural Systems Analysis","Sustainable Building Design and Assessment","Sustainable Design and Development","Sustainable Development and Environmental Policy","Sustainable Industrial Ecology","Sustainable Supply Chain Management","Synthetic Aperture Radar (SAR) Applications and Techniques","T-cell and B-cell Immunology","Tardigrade Biology and Ecology","Target Tracking and Data Fusion in Sensor Networks","Technology Use by Older Adults","Telomeres, Telomerase, and Senescence","Tendon Structure and Treatment","Testicular diseases and treatments","Therapeutic Uses of Natural Elements","Thermal Regulation in Medicine","Thermoregulation and physiological responses","Thyroid Disorders and Treatments","Tissue Engineering and Regenerative Medicine","Tourism, Leisure and Hospitality Management","Tourism, Volunteerism, and Development","Toxic Organic Pollutants Impact","Toxoplasma gondii Research Studies","Trace Elements in Health","Traffic and Road Safety","Transboundary Water Resource Management","Transport Systems and Technology","Transportation","Transportation Planning and Optimization","Tree Root and Stability Studies","Tree-ring climate responses","Tropical and Extratropical Cyclones Research","Turfgrass Adaptation and Management","Turtle Biology and Conservation","UAV Applications and Optimization","Ultrasound and Cavitation Phenomena","Underground infrastructure and sustainability","Underwater Acoustics Research","Underwater Vehicles and Communication Systems","Urban Agriculture and Sustainability","Urban Design and Spatial Analysis","Urban Green Space and Health","Urban Heat Island Mitigation","Urban Planning and Landscape Design","Urban Stormwater Management Solutions","Urban Studies","Urban Transport and Accessibility","Urban and Rural Development Challenges","Urbanism, Landscape, and Tourism Studies","Vector-Borne Animal Diseases","Vector-borne infectious diseases","Veterinary","Veterinary Equine Medical Research","Veterinary Medicine and Surgery","Veterinary Pharmacology and Anesthesia","Vibrio bacteria research studies","Video Surveillance and Tracking Methods","Viral Infections and Vectors","Viral gastroenteritis research and epidemiology","Virology","Virtual Reality Applications and Impacts","Visual Arts and Performing Arts","Vitamin C and Antioxidants Research","Vitamin K Research Studies","Wastewater Treatment and Nitrogen Removal","Wastewater Treatment and Reuse","Water Quality Monitoring Technologies","Water Quality and Pollution Assessment","Water Quality and Resources Studies","Water Science and Technology","Water Systems and Optimization","Water resources management and optimization","Water-Energy-Food Nexus Studies","Weed Control and Herbicide Applications","Wheat and Barley Genetics and Pathology","Wildlife Conservation and Criminology Analyses","Wildlife Ecology and Conservation","Wildlife-Road Interactions and Conservation","Wind Energy Research and Development","Wind and Air Flow Studies","Wine Industry and Tourism","Winter Sports Injuries and Performance","Yeasts and Rust Fungi Studies","Yersinia bacterium, plague, ectoparasites research","Youth Development and Social Support","Zebrafish Biomedical Research Applications","Zoonotic diseases and public health","biodegradable polymer synthesis and properties","demographic modeling and climate adaptation","melanin and skin pigmentation","scientometrics and bibliometrics research"],"freq":[2,1,3,1,4,13,1,1,1,1,1,6,7,12,1,3,1,1,2,2,1572,2,2,1,6,5,4,14,70,22,1,1,1,1,23,3,1,2,1,1,234,180,37,6,246,5,8,38,1,32,38,1,6,18,1,1,1,1,102,47,8,46,149,299,2,1,4,4,12,13,67,30,2,1,17,27,1,1,4,485,2,20,48,1,1,471,1,7,4,79,1,4,2,1,1,1,918,3,3,4,1,2,4,7,1,3,1,1,2,81,1,1,1,78,4,1,18,1,9,14,2,3,2,20,3,4,1,1,1,1,1,1,7,1,1,36,1,2,6,2,1,7,1,1,5,3,6,10,6,2,2,11,2,142,5,70,1,1,38,33,1,4,6,2,1,1,2,1,1,2,3,1,52,1,8,2,1,2,2,131,11,2,1,1,45,1,1,3,1,2,19,87,2,6,2,3,2,2,41,4,1,9,15,4,32,2,2,4,1,2,1,3,1,1,39,1,1,1,1,726,10,433,3508,2,398,177,2,675,121,138,141,8,6,1,24,12,1,3,2,2,1,1,2,4,6,1,3,2,90,1,151,54,91,41,69,5,2,39,2,7884,2,4,57,2,3,11,1,1,2,20,3,2,1,1,2,2,11,11,9,14,3,8,14,2,1,69,196,940,42,12,1,2,1,1,1,1,2,5,19,1,3,4,9,1,107,46,100,23,19,5,4,57,16,1,1,1,1,15,24,4,3,156,1,11,1,7,1,197,250,2,600,1,23,3,4,8,6,49,1,63,1,3,8,1,1,16,56,8,1,2,6,1,4,1,1,1366,2,1,1,1,2,1,7,1,1,171,592,1,1,1,410,1,7,21,20,1,1,1,4,2,1,1,1,2,1,1,2,1,51,4,1,3,2,6,52,32,5,2,1,34,56,1,3,1,1,54,1,185,8,3,151,1,1,14,35,7,14,17,1,2,1,3,1,1,2,166,1,30,26,3,16,2,4,7,2,2,141,1,2,205,1,7,2,2,2,8,2,1,93,2691,1,3,1,3,1,11,322,53,1,74,9,1,2,1,38,48,4,533,174,1,2,7,2,6,11,5,23,11,7,12,1,2,1,1,205,1,2,87,2,3,4,1,4,1,12,1,30,9,10,12,1,6,1,2,4,1,1,2,1,168,5,3,8,4,4,2,1,1,1,4,1,69,16,1,1486,4,1,2,2,4,6,15,4,1,1,2,6,6,1,1,1,8,24,12,171,6,1,4,3,1,3,2,1,2,5,3,30,1,2,114,7,3,3,115,1,2,3,86,1,3,48,1,1,1,2,9,1,1,20,1,1,3,1,1,8802,2,88,84,1,1,2,8,3,6,25,33,4,5,240,2,3,4,37,1,5,199,2,1,5,1,1,1,2,7,1,34,4,53,1,1,1,28,27,9,1,145,2,2,56,1,1,6,1,1,6,2,13,1,9,9,3,141,186,44,6,1,3,2,1,3,7,24,40,2,1,6,4,18,59,1,11,1,1,2,2,8,10,1,11,1,10,4,1,1,2,10,1,1,1,1,4,1,2,7,2,208,1,3,35,129,3,1,1076,1,1,2,192,2,12,6,22,1,6,26,7,4,1,3,433,1,1,1,4,3,8,2,3,1,2,12,9,3,1,3,2,1,7,2,2,43,3,2,13,1,1,2,1,1,1,2,1,1,1,3,1,1,1,3,3,3,2,1,4,112,1,2,2,2,1,22,1,2,69,3,2,3,1,1,1,8,4,13,1,88,21,1,2,3,18,1,1,6,17,210,2,1,6,1,1,24,4,6,1,1,1,1,1,1,21,3,1,73,3,15,11,1,1,4,1112,80,8,1,1,1,5,13,1,1,43,1,2,2,6],"fontFamily":"Segoe UI","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":0.02044989775051125,"backgroundColor":"white","gridSize":0,"minRotation":-0.7853981633974483,"maxRotation":0.7853981633974483,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
</section>
<section id="primary-topics" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="primary-topics"><span class="header-section-number">1.2</span> Primary topics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>get_top_topic <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(df) <span class="sc">==</span> <span class="dv">0</span> <span class="sc">||</span> <span class="fu">sum</span>(df<span class="sc">$</span>name <span class="sc">==</span> <span class="st">"topic"</span>) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If the dataframe is empty or contains no topics</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">data.frame</span>(<span class="at">display_name =</span> <span class="cn">NA</span>, <span class="at">score =</span> <span class="cn">NA</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Otherwise, proceed to get the top topic</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    top_topic <span class="ot">&lt;-</span> df  <span class="sc">|&gt;</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"topic"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">slice_max</span>(<span class="at">order_by =</span> score)  <span class="sc">|&gt;</span> </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)  <span class="co"># Ensure only one result is returned</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(top_topic)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>top_topics<span class="ot">&lt;-</span>All_NINA  <span class="sc">|&gt;</span> </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">top_topic_display_name =</span> <span class="fu">map_chr</span>(topics, <span class="sc">~</span> {</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="fu">get_top_topic</span>(.x)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">nrow</span>(result) <span class="sc">&gt;</span> <span class="dv">0</span>) result<span class="sc">$</span>display_name <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    }),</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">top_topic_score =</span> <span class="fu">map_dbl</span>(topics, <span class="sc">~</span> {</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="fu">get_top_topic</span>(.x)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">nrow</span>(result) <span class="sc">&gt;</span> <span class="dv">0</span>) result<span class="sc">$</span>score <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>topics_df<span class="ot">&lt;-</span>top_topics <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(top_topic_display_name) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>wordcloud2<span class="sc">::</span><span class="fu">wordcloud2</span>(topics_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-9a20ba37723c24f1d9bc" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9a20ba37723c24f1d9bc">{"x":{"word":null,"freq":4432,"fontFamily":"Segoe UI","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":0.04061371841155235,"backgroundColor":"white","gridSize":0,"minRotation":-0.7853981633974483,"maxRotation":0.7853981633974483,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>